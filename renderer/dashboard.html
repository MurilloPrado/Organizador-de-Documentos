<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <title>Financeiro</title>

        <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;500;700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="styles/style.css">
        <link rel="stylesheet" href="styles/documentos.css">
        <link rel="stylesheet" href="styles/dashboard.css">
        <link rel="stylesheet" href="styles/financeiro.css">
    </head>

    <body>
        <header class="document-view-header">
            <a href="index.html" class="back-button">&#x25C0;</a>
            <div class="document-view-header-center">
            <div class="title">Gestão</div>
            </div>
            <div></div>
        </header>

        <main>
            <div class="dashboard">
                <!-- VISÃO GERAL -->
                <section class="overview">
                    <div class="section-header" data-section="overview">
                        <h2>Visão Geral</h2>

                        <div class="section-filter">
                            <div class="filter-label" id="overviewFilterLabel">
                                <img src="assets/sort.png"> 
                                <span></span>
                            </div>

                            <button class="filter-btn" id="overviewFilterBtn">
                                <img src="assets/dashboard_filter.png">
                            </button>
                        </div>
                    </div>

                    <div class="overview-grid">
                        <div class="card ganhos has-tooltip">
                            <span class="tooltip-content">
                                Valor total das receitas recebidas no período.
                            </span>
                            <div class="label">
                                Total de Ganhos
                            </div>
                            <strong class="value" id="totalGanhos">R$ 0,00</strong>
                        </div>

                        <div class="card resultado has-tooltip">
                            <span class="tooltip-content">
                                Resultado líquido do período, obtido pela diferença entre receitas e despesas. (Ganhos - Custos)
                            </span>
                            <span class="label">Resultado Final</span>
                            <strong class="value" id="resultadoFinal">R$ 0,00</strong>
                        </div>

                        <div class="card custos has-tooltip">
                            <span class="tooltip-content">
                                Soma total das despesas registradas no período, incluindo taxas, despesas processuais e outros custos.
                            </span>
                            <span class="label">Total de Custos</span>
                            <strong class="value" id="totalCustos">R$ 0,00</strong>
                        </div>

                        <div class="card margem has-tooltip">
                            <span class="tooltip-content">
                               Percentual de lucro em relação aos ganhos, calculada com base no resultado líquido em relação ao total de ganhos.
                            </span>
                            <span class="label">Margem de Lucro</span>
                            <strong class="value" id="margemLucro">0%</strong>
                        </div>
                    </div>
                </section>

                <!-- GANHOS X CUSTOS -->
                <section class="ganhos-custos">
                    <div class="section-header" data-section="ganhosCustos">
                        <div class="chart-title has-tooltip">
                            <h2>Ganhos x Custos</h2>

                            <span class="tooltip-content">
                                Ganhos x Custos compara, ao longo do período selecionado, os valores recebidos e os valores gastos.
                                Identifica a relação entre receitas e despesas, demonstrando o equilíbrio financeiro.
                            </span>
                        </div>

                        <div class="section-filter">
                            <div class="filter-label" id="ganhosCustosFilterLabel">
                                <img src="assets/sort.png"> 
                                Mensal · Mês atual
                            </div>

                            <button class="filter-btn" id="ganhosCustosFilterBtn">
                                <img src="assets/dashboard_filter.png">
                            </button>
                        </div>
                    </div>
                </section>
                
                <section class="chart-section">
                    <div class="chart-legend" id="ganhosCustosLegend"></div>
                    <div class="chart-box">
                        <canvas id="chartGanhosCustos"></canvas>
                    </div>
                </section>

                <!-- DISTRIBUIÇÃO DE CUSTOS -->
                <section class="distribuicao-custos">
                    <div class="section-header" data-section="distribuicao">
                        <div class="chart-title has-tooltip">
                            <h2>Distribuição de Custos</h2>
                            <span class="tooltip-content">
                                Distribuição de Custos apresenta a composição das despesas por categoria.
                                Mostra como os custos estão distribuídos e quais categorias têm maior impacto financeiro.
                            </span>
                        </div>

                        <div class="section-filter">
                            <div class="filter-label" id="distribuicaoCustosFilterLabel">
                                <img src="assets/sort.png"> 
                                Mensal · Mês atual
                            </div>

                            <button class="filter-btn" id="distribuicaoCustosFilterBtn">
                                <img src="assets/dashboard_filter.png">
                            </button>
                        </div>
                    </div>
                </section>

                <section class="chart-section">
                    <div class="chart-legend" id="custosLegend"></div>
                    <div class="chart-box chart-box--square">
                        <canvas id="chartDistribuicaoCustos"></canvas>
                    </div>
                </section>

                <!-- EVOLUÇÃO FINANCEIRA -->
                <section class="evolucao-financeira">
                    <div class="section-header" data-section="evolucao">
                        <div class="chart-title has-tooltip">
                            <h2>Evolução Financeira</h2>
                                <span class="tooltip-content">
                                    Evolução Financeira representa a variação dos resultados ao longo do tempo.
                                    Indica a tendência de desempenho financeiro, evidenciando crescimento ou queda nos resultados mensais.
                            </span>
                        </div>

                        <div class="section-filter">
                            <div class="filter-label" id="evolucaoFinanceiraFilterLabel">
                                <img src="assets/sort.png"> 
                                Mensal · Mês atual
                            </div>

                            <button class="filter-btn" id="evolucaoFinanceiraFilterBtn">
                                <img src="assets/dashboard_filter.png">
                            </button>
                        </div>
                    </div>
                </section>
                <section class="chart-section">
                    <div class="chart-legend" id="evolucaoLegend"></div>
                    <div class="chart-box">
                        <canvas id="chartEvolucaoFinanceira"></canvas>
                    </div>
                </section>

                <!-- SALDO ACUMULADO -->
                <section class="saldo-acumulado">
                    <div class="section-header" data-section="saldo">
                        <div class="chart-title has-tooltip">
                            <h2>Saldo Acumulado</h2>
                            <span class="tooltip-content">
                                Saldo acumulado representa a soma dos resultados mensais ao longo do tempo.
                                Indica quanto foi acumulado (lucro ou prejuízo) até o período atual.
                            </span>
                        </div>

                        <div class="section-filter">
                            <div class="filter-label" id="saldoAcumuladoFilterLabel">
                                <img src="assets/sort.png"> 
                                Mensal · Mês atual
                            </div>

                            <button class="filter-btn" id="saldoAcumuladoFilterBtn">
                                <img src="assets/dashboard_filter.png">
                            </button>
                        </div>
                    </div>
                </section>

                <section class="chart-section">
                    <div class="chart-box">
                        <canvas id="chartSaldoAcumulado"></canvas>
                    </div>
                </section>

                <!-- TOP CUSTOS -->
                <section class="top-custos">
                    <div class="section-header" data-section="topCustos">
                            <div class="chart-title has-tooltip">
                                <h2>Maiores Custos</h2>
                                <span class="tooltip-content">
                                    Maiores Custos lista as despesas de maior valor registradas no período.
                                    Facilita a visualização das despesas que mais impactam o desempenho financeiro.
                                </span>
                            </div>

                            <div class="section-filter">
                                <div class="filter-label-group">
                                    <div class="filter-label" id="topCustosCategoryLabel">
                                        <img src="assets/sort.png"> 
                                        Todos
                                    </div>

                                    <div class="filter-label" id="topCustosFilterLabel">
                                        <img src="assets/sort.png"> 
                                        Mensal · Mês atual
                                    </div>
                                </div>

                                <button class="filter-btn" id="topCustosFilterBtn">
                                    <img src="assets/dashboard_filter.png">
                                </button>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="table-section" id="topCustosSection">

                    <table class="top-costs">
                        <thead>
                        <tr>
                            <th>Descrição</th>
                            <th>Categoria</th>
                            <th>Valor</th>
                            <th>Data</th>
                        </tr>
                        </thead>
                        <tbody id="topCustosTable">
                        <!-- linhas via JS -->
                        </tbody>
                    </table>
                </section>
            </div>

            <!-- FILTRO -->
            <div id="dashboardFilterPanel" class="filter-panel" hidden>
                <div class="category-label" data-only="topCustos">
                    <h4>Categoria</h4>

                    <hr>
                    
                    <label>
                        <input type="radio" name="categoriaTopCustos" value="all" checked>
                        Todos
                    </label>

                    <label>
                        <input type="radio" name="categoriaTopCustos" value="taxa">
                        Taxas
                    </label>

                    <label>
                        <input type="radio" name="categoriaTopCustos" value="despesas">
                        Despesas processuais
                    </label>

                    <label>
                        <input type="radio" name="categoriaTopCustos" value="outros">
                        Outros
                    </label>
                </div>

                <h4>Filtrar período </h4>

                <hr>

                <label data-filter="monthly">
                    <input type="radio" name="periodo" value="monthly" checked>
                    Mês atual
                </label>

                <label data-filter="lastMonths5">
                    <input type="radio" name="periodo" value="lastMonths5">
                    Últimos 5 meses
                </label>

                <label data-filter="yearly">
                    <input type="radio" name="periodo" value="yearly">
                    Ano atual
                </label>

                <label data-filter="30">
                    <input type="radio" name="periodo" value="30">
                    Últimos 30 dias
                </label>

                <label data-filter="60">
                    <input type="radio" name="periodo" value="60">
                    Últimos 60 dias
                </label>

                <label data-filter="90">
                    <input type="radio" name="periodo" value="90">
                    Últimos 90 dias
                </label>

                <label data-filter="all">
                    <input type="radio" name="periodo" value="all">
                    Desde sempre
                </label>

                <hr>

                <div class="date-range">
                    <div class="date-field">
                        <label>De</label>
                        <div class="date-box">
                        <input type="date" id="dashDateDe" class="date-input">
                        <span class="date-text">__/__/__</span>
                        </div>
                    </div>

                    <div class="date-field">
                        <label>Até</label>
                        <div class="date-box">
                        <input type="date" id="dashDateAte" class="date-input">
                        <span class="date-text">__/__/__</span>
                        </div>
                    </div>

                    <button id="dashClearDate" class="clear-btn">
                        Limpar período
                    </button>
                </div>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script src="scripts/dashboard.js"></script>
        </main>
    </body>
</html>